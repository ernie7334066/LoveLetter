!function(e){var a={};function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(r,n,function(a){return e[a]}.bind(null,n));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=4)}([function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.cardRank={Guard:1,Priest:2,Baron:3,Handmaid:4,Prince:5,King:6,Countess:7,Princess:8},a.cardNames=["Guard","Priest","Baron","Handmaid","Prince","King","Countess","Princess"],a.startingCards={Guard:5,Priest:2,Baron:2,Handmaid:2,Prince:2,King:1,Countess:1,Princess:1}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.nextPlayer=a.getNonDeadNonProtectedPlayers=a.getHighestNotYetAppearedCard=a.getAvailableCardSize=a.getRandomCard=a.checkGameEnd=a.compareCards=void 0;var r,n=t(2),s=(r=n)&&r.__esModule?r:{default:r},d=t(0);function i(e){var a=0;for(var t in e)e.hasOwnProperty(t)&&(a+=e[t]);return a}var o=function(e,a){return d.cardRank[a]-d.cardRank[e]};a.compareCards=o,a.checkGameEnd=function(e,a){return i(a)<=0||function(e){var a=0;return e.forEach(function(e){e.dead||a++}),a}(e)<=1?{gameEnd:!0,winner:function(e){var a=new s.default(-1);return e.forEach(function(e){e.dead||(-1==a.number?a=e:o(a.cards[0],e.cards[0])>0&&(a=e))}),a}(e)}:{gameEnd:!1,winner:-1}},a.getRandomCard=function(e){var a=i(e);if(console.log("Total Cards: "+a),0!=a){var t=Math.floor(Math.random()*a),r=0,n=void 0;for(var s in e)if(e.hasOwnProperty(s)&&(r+=e[s])>t){n=s;break}return console.log("Card drawed: "+n),e[n]--,n}},a.getAvailableCardSize=i,a.getHighestNotYetAppearedCard=function(e,a){for(var t=7;t>0;t--){var r=d.cardNames[t];if(0!==a[r]&&-1===e.indexOf(r))return r}return"Priest"},a.getNonDeadNonProtectedPlayers=function(e,a){var t=[];return a.forEach(function(a){a.number==e.number||a.protected||a.dead||t.push(a.number)}),t},a.nextPlayer=function(e,a){for(var t=e.length,r=a.number%t;1==e[r].dead;)r=(r+1)%t;return e[r]}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(a,t,r){return t&&e(a.prototype,t),r&&e(a,r),a}}(),n=t(1);var s=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.number=a,this.dead=!1,this.protected=!1,this.cards=[]}return r(e,[{key:"draw",value:function(e){console.log("Draw a card for player "+this.number),this.cards.push((0,n.getRandomCard)(e))}},{key:"reset",value:function(){this.dead=!1,this.protected=!1,this.cards=[]}},{key:"showHand",value:function(){$("#playerTitle"+this.number).append(" - "+this.cards[0])}},{key:"setPlayerDead",value:function(e){this.dead=!0,$("#playerTitle"+this.number).attr("class","playerDead"),$("#playerTitle"+this.number).append(" - "+this.cards[0]),e[this.cards[0]]--}},{key:"randomAI",value:function(e,a){var t=void 0;t=-1!==this.cards.indexOf("Handmaid")?this.cards.indexOf("Handmaid"):(0,n.compareCards)(this.cards[0],this.cards[1])>0?0:1;var r=this.cards[t];console.log(r);var s=void 0;"Guard"===r&&(s=(0,n.getHighestNotYetAppearedCard)(this.cards,a));var d=this.number%4+1,i=(0,n.getNonDeadNonProtectedPlayers)(this,e);0==i.length||(d=i[Math.floor(Math.random()*i.length)]);return this.play(t,d,s)}},{key:"play",value:function(e,a,t){var r=this.cards[e];return this.cards.splice(e,1),{card:r,against:a,guess:t}}},{key:"discard",value:function(){console.log("Player "+this.number+" discarded a card.");var e=this.cards[0];return $("#playerPlayedList"+this.number).append('<li class="discard item">'+e+"</li>"),this.cards=[],e}}]),e}();a.default=s},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.disablePlayAgainstButton=function(){$("#playAgainstButton1").prop("disabled",!0),$("#playAgainstButton2").prop("disabled",!0),$("#playAgainstButton3").prop("disabled",!0),$("#playAgainstButton4").prop("disabled",!0)},a.disableGuardGuessButton=function(){$("#guardGuessButton2").prop("disabled",!0),$("#guardGuessButton3").prop("disabled",!0),$("#guardGuessButton4").prop("disabled",!0),$("#guardGuessButton5").prop("disabled",!0),$("#guardGuessButton6").prop("disabled",!0),$("#guardGuessButton7").prop("disabled",!0),$("#guardGuessButton8").prop("disabled",!0)},a.disablePlayButton=function(){$("#playButton1").prop("disabled",!0),$("#playButton2").prop("disabled",!0)},a.enablePlayButton=function(){$("#playButton1").prop("disabled",!1),$("#playButton2").prop("disabled",!1)},a.enablePlayAgainstButton=function(e){for(var a=1;a<5;a++)e[a-1].dead||$("#playAgainstButton"+a).prop("disabled",!1)},a.enableGuardGuessButton=function(){$("#guardGuessButton2").prop("disabled",!1),$("#guardGuessButton3").prop("disabled",!1),$("#guardGuessButton4").prop("disabled",!1),$("#guardGuessButton5").prop("disabled",!1),$("#guardGuessButton6").prop("disabled",!1),$("#guardGuessButton7").prop("disabled",!1),$("#guardGuessButton8").prop("disabled",!1)}},function(e,a,t){"use strict";var r,n,s,d,i,o=t(2),u=(r=o)&&r.__esModule?r:{default:r},l=t(1),c=t(3),p=t(0);var f=void 0,g=void 0,y=void 0;function b(){setTimeout(function(){if(!1!==(i=(0,l.checkGameEnd)(n,s)).gameEnd)return $("#status").text("Game ended, winner is "+i.winner.number),void n.forEach(function(e){e.dead||e.showHand(),e.number===i.winner.number&&$("#playerTitle"+e.number).attr("class","playerWin")});m(d=(0,l.nextPlayer)(n,d))},1e3)}function m(e){if($("#status").text("Player "+e.number+"'s turn, "+(0,l.getAvailableCardSize)(s)+" cards left."),e.protected=!1,e.draw(s),1===e.number)(0,c.enablePlayButton)(),$("#playButton1").text(""+e.cards[0]),$("#playButton2").text(""+e.cards[1]);else{var a=e.randomAI(n,y);console.log("Player "+e.number+" played "+a.card+" against "+a.against),v(e,a)}}function v(e,a){if(function(e,a){"Handmaid"===a.card||"Countess"===a.card?$("#playerPlayedList"+e.number).append('<li class="item">'+a.card+"</li>"):"Guard"===a.card?$("#playerPlayedList"+e.number).append('<li class="item">'+a.card+" against "+a.against+", guessing "+a.guess+"</li>"):$("#playerPlayedList"+e.number).append('<li class="item">'+a.card+" against "+a.against+"</li>"),y[a.card]--}(e,a),"Guard"===a.card)n[a.against-1].protected||n[a.against-1].dead||n[a.against-1].cards[0]===a.guess&&n[a.against-1].setPlayerDead(y);else if("Priest"===a.card)1===e.number&&$("#priestList").append('<li class="item">Player '+n[a.against-1].number+" has "+n[a.against-1].cards[0]+"</li>");else if("Baron"===a.card)n[a.against-1].protected||n[a.against-1].dead||((0,l.compareCards)(e.cards[0],n[a.against-1].cards[0])>0?e.setPlayerDead(y):(0,l.compareCards)(e.cards[0],n[a.against-1].cards[0])<0&&n[a.against-1].setPlayerDead(y));else if("Handmaid"===a.card)e.protected=!0;else if("Princess"===a.card)e.setPlayerDead(y);else if("King"===a.card){if(!n[a.against-1].protected&&!n[a.against-1].dead){var t=e.cards[0];e.cards[0]=n[a.against-1].cards[0],n[a.against-1].cards[0]=t}}else if("Countess"===a.card);else if("Prince"===a.card&&!n[a.against-1].protected&&!n[a.against-1].dead){var r=n[a.against-1].discard();n[a.against-1].draw(s),"Princess"===r&&n[a.against-1].setPlayerDead(y)}b()}function h(e){$("#playButton"+e).click(function(){if((0,c.disablePlayButton)(),f=e-1,"Handmaid"===n[0].cards[f]||"Countess"===n[0].cards[f]){var a=n[0].play(f,e,-1);v(n[0],a)}else(0,c.enablePlayAgainstButton)(n)})}function P(e){$("#playAgainstButton"+e).click(function(){if((0,c.disablePlayAgainstButton)(),g=e,"Guard"!==n[0].cards[f]){var a=n[0].play(f,g,-1);v(n[0],a)}else(0,c.enableGuardGuessButton)()})}function B(e){$("#guardGuessButton"+e).click(function(){(0,c.disableGuardGuessButton)();var a=n[0].play(f,g,p.cardNames[e-1]);v(n[0],a)})}function G(){s=JSON.parse(JSON.stringify(p.startingCards)),y=JSON.parse(JSON.stringify(p.startingCards)),(0,l.getRandomCard)(s),(0,c.disablePlayAgainstButton)(),(0,c.disableGuardGuessButton)(),$("#priestList").empty();for(var e=0;e<n.length;e++)$("#playerPlayedList"+(e+1)).empty(),$("#playerTitle"+(e+1)).removeClass(),$("#playerTitle"+(e+1)).text("Player "+(e+1));n.forEach(function(e){e.reset(),e.draw(s)}),d=n[0],i=!1,console.log("Start Game."),m(d)}$(document).ready(function(){!function(){n=[new u.default(1),new u.default(2),new u.default(3),new u.default(4)];for(var e=0;e<n.length;e++)P(e+1);for(var a=0;a<2;a++)h(a+1);for(var t=1;t<8;t++)B(t+1);G()}()}),$("#restart").click(function(){G()})}]);
//# sourceMappingURL=main.bundle.js.map