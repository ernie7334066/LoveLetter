!function(e){var a={};function t(r){if(a[r])return a[r].exports;var s=a[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var s in e)t.d(r,s,function(a){return e[a]}.bind(null,s));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=5)}([function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.cardRank={Guard:1,Priest:2,Baron:3,Handmaid:4,Prince:5,King:6,Countess:7,Princess:8},a.cardNames=["Guard","Priest","Baron","Handmaid","Prince","King","Countess","Princess"],a.nonAttackingCards=["Handmaid","Countess","King"],a.startingCards={Guard:5,Priest:2,Baron:2,Handmaid:2,Prince:2,King:1,Countess:1,Princess:1}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.nextPlayer=a.getNonDeadNonProtectedPlayers=a.getHighestNotYetAppearedCard=a.getAvailableCardSize=a.getRandomCard=a.checkGameEnd=a.compareCards=void 0;var r,s=t(2),n=(r=s)&&r.__esModule?r:{default:r},i=t(0);function d(e){var a=0;for(var t in e)e.hasOwnProperty(t)&&(a+=e[t]);return a}var l=function(e,a){return i.cardRank[a]-i.cardRank[e]};a.compareCards=l,a.checkGameEnd=function(e,a){return d(a)<=0||function(e){var a=0;return e.forEach(function(e){e.dead||a++}),a}(e)<=1?{gameEnd:!0,winner:function(e){var a=new n.default(-1);return e.forEach(function(e){e.dead||(-1==a.number?a=e:l(a.cards[0],e.cards[0])>0&&(a=e))}),a}(e)}:{gameEnd:!1,winner:-1}},a.getRandomCard=function(e){var a=d(e);if(console.log("Total Cards: "+a),0!=a){var t=Math.floor(Math.random()*a),r=0,s=void 0;for(var n in e)if(e.hasOwnProperty(n)&&(r+=e[n])>t){s=n;break}return console.log("Card drawed: "+s),e[s]--,s}},a.getAvailableCardSize=d,a.getHighestNotYetAppearedCard=function(e,a){for(var t=7;t>0;t--){var r=i.cardNames[t];if(0!==a[r]&&-1===e.indexOf(r))return r}return"Priest"},a.getNonDeadNonProtectedPlayers=function(e,a){var t=[];return a.forEach(function(a){a.number==e.number||a.protected||a.dead||t.push(a.number)}),t},a.nextPlayer=function(e,a){for(var t=e.length,r=a.number%t;1==e[r].dead;)r=(r+1)%t;return e[r]}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(a,t,r){return t&&e(a.prototype,t),r&&e(a,r),a}}(),s=t(1);var n=function(){function e(a){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.number=a,this.dead=!1,this.protected=!1,this.cards=[]}return r(e,[{key:"draw",value:function(e){console.log("Draw a card for player "+this.number),this.cards.push((0,s.getRandomCard)(e))}},{key:"reset",value:function(){this.dead=!1,this.protected=!1,this.cards=[]}},{key:"showHand",value:function(){$("#playerTitle"+this.number).append(" - "+this.cards[0])}},{key:"setPlayerDead",value:function(e){this.dead=!0,$("#playerTitle"+this.number).attr("class","playerDead"),$("#playerTitle"+this.number).append(" - "+this.cards[0]),e[this.cards[0]]--}},{key:"randomAI",value:function(e,a){var t=void 0;t=-1!==this.cards.indexOf("Handmaid")?this.cards.indexOf("Handmaid"):(0,s.compareCards)(this.cards[0],this.cards[1])>0?0:1;var r=this.cards[t];console.log(r);var n=void 0;"Guard"===r&&(n=(0,s.getHighestNotYetAppearedCard)(this.cards,a));var i=this.number%4+1,d=(0,s.getNonDeadNonProtectedPlayers)(this,e);0==d.length||(i=d[Math.floor(Math.random()*d.length)]);return this.play(t,i,n)}},{key:"play",value:function(e,a,t){var r=this.cards[e];return this.cards.splice(e,1),{card:r,against:a,guess:t}}},{key:"discard",value:function(){console.log("Player "+this.number+" discarded a card.");var e=this.cards[0];return $("#playerPlayedList"+this.number).append('<li class="discard item">'+e+"</li>"),this.cards=[],e}}]),e}();a.default=n},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.disablePlayAgainstButton=function(){$("#playAgainstButton1").prop("disabled",!0),$("#playAgainstButton2").prop("disabled",!0),$("#playAgainstButton3").prop("disabled",!0),$("#playAgainstButton4").prop("disabled",!0)},a.disableGuardGuessButton=function(){$("#guardGuessButton2").prop("disabled",!0),$("#guardGuessButton3").prop("disabled",!0),$("#guardGuessButton4").prop("disabled",!0),$("#guardGuessButton5").prop("disabled",!0),$("#guardGuessButton6").prop("disabled",!0),$("#guardGuessButton7").prop("disabled",!0),$("#guardGuessButton8").prop("disabled",!0)},a.disablePlayButton=function(){$("#playButton1").prop("disabled",!0),$("#playButton2").prop("disabled",!0)},a.enablePlayButton=function(){$("#playButton1").prop("disabled",!1),$("#playButton2").prop("disabled",!1)},a.enablePlayAgainstButton=function(e){for(var a=1;a<5;a++)e[a-1].dead||$("#playAgainstButton"+a).prop("disabled",!1)},a.enableGuardGuessButton=function(){$("#guardGuessButton2").prop("disabled",!1),$("#guardGuessButton3").prop("disabled",!1),$("#guardGuessButton4").prop("disabled",!1),$("#guardGuessButton5").prop("disabled",!1),$("#guardGuessButton6").prop("disabled",!1),$("#guardGuessButton7").prop("disabled",!1),$("#guardGuessButton8").prop("disabled",!1)}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r,s=function(){function e(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(a,t,r){return t&&e(a.prototype,t),r&&e(a,r),a}}(),n=t(2),i=(r=n)&&r.__esModule?r:{default:r},d=t(1),l=t(3),u=t(0);var o=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this.players=[new i.default(1),new i.default(2),new i.default(3),new i.default(4)],this.cardToPlay=-1}return s(e,[{key:"startGame",value:function(){console.log("Start Game."),this.turn(this.currentPlayer)}},{key:"endGame",value:function(e){$("#status").text("Game ended, winner is "+e.winner.number),this.players.forEach(function(a){a.dead||a.showHand(),a.number===e.winner.number&&$("#playerTitle"+a.number).attr("class","playerWin")})}},{key:"setNextTurn",value:function(){var e=this;setTimeout(function(){e.gameEnd=(0,d.checkGameEnd)(e.players,e.availableCards),!1===e.gameEnd.gameEnd?(e.currentPlayer=(0,d.nextPlayer)(e.players,e.currentPlayer),e.turn(e.currentPlayer)):e.endGame(e.gameEnd)},1e3)}},{key:"turn",value:function(e){if($("#status").text("Player "+e.number+"'s turn, "+(0,d.getAvailableCardSize)(this.availableCards)+" cards left."),e.protected=!1,e.draw(this.availableCards),1===e.number)(0,l.enablePlayButton)(),$("#playButton1").text(""+e.cards[0]),$("#playButton2").text(""+e.cards[1]);else{var a=e.randomAI(this.players,this.cardsNotPlayedYet);console.log("Player "+e.number+" played "+a.card+" against "+a.against),this.resolve(e,a)}}},{key:"updatePlayedCard",value:function(e,a){"Handmaid"===a.card||"Countess"===a.card?$("#playerPlayedList"+e.number).append('<li class="item">'+a.card+"</li>"):"Guard"===a.card?$("#playerPlayedList"+e.number).append('<li class="item">'+a.card+" against "+a.against+", guessing "+a.guess+"</li>"):$("#playerPlayedList"+e.number).append('<li class="item">'+a.card+" against "+a.against+"</li>"),this.cardsNotPlayedYet[a.card]--}},{key:"resolve",value:function(e,a){if(this.updatePlayedCard(e,a),"Guard"===a.card)this.players[a.against-1].protected||this.players[a.against-1].dead||this.players[a.against-1].cards[0]===a.guess&&this.players[a.against-1].setPlayerDead(this.cardsNotPlayedYet);else if("Priest"===a.card)1===e.number&&$("#priestList").append('<li class="item">Player '+this.players[a.against-1].number+" has "+this.players[a.against-1].cards[0]+"</li>");else if("Baron"===a.card)this.players[a.against-1].protected||this.players[a.against-1].dead||((0,d.compareCards)(e.cards[0],this.players[a.against-1].cards[0])>0?e.setPlayerDead(this.cardsNotPlayedYet):(0,d.compareCards)(e.cards[0],this.players[a.against-1].cards[0])<0&&this.players[a.against-1].setPlayerDead(this.cardsNotPlayedYet));else if("Handmaid"===a.card)e.protected=!0;else if("Princess"===a.card)e.setPlayerDead(this.cardsNotPlayedYet);else if("King"===a.card){if(!this.players[a.against-1].protected&&!this.players[a.against-1].dead){var t=e.cards[0];e.cards[0]=this.players[a.against-1].cards[0],this.players[a.against-1].cards[0]=t}}else if("Countess"===a.card);else if("Prince"===a.card&&!this.players[a.against-1].protected&&!this.players[a.against-1].dead){var r=this.players[a.against-1].discard();this.players[a.against-1].draw(this.availableCards),"Princess"===r&&this.players[a.against-1].setPlayerDead(this.cardsNotPlayedYet)}this.setNextTurn()}},{key:"initailizeCards",value:function(){this.availableCards=JSON.parse(JSON.stringify(u.startingCards)),this.cardsNotPlayedYet=JSON.parse(JSON.stringify(u.startingCards))}},{key:"playCardOnClick",value:function(e){if((0,l.disablePlayButton)(),this.cardToPlay=e-1,-1!==u.nonAttackingCards.indexOf(this.players[0].cards[this.cardToPlay])){var a=this.players[0].play(this.cardToPlay,e,-1);this.resolve(this.players[0],a)}else(0,l.enablePlayAgainstButton)(this.players)}},{key:"playAgainstOnClick",value:function(e){if((0,l.disablePlayAgainstButton)(),this.playAgainst=e,"Guard"!==this.players[0].cards[this.cardToPlay]){var a=this.players[0].play(this.cardToPlay,this.playAgainst,-1);this.resolve(this.players[0],a)}else(0,l.enableGuardGuessButton)()}},{key:"guardGuessOnClick",value:function(e){(0,l.disableGuardGuessButton)();var a=this.players[0].play(this.cardToPlay,this.playAgainst,u.cardNames[e-1]);this.resolve(this.players[0],a)}},{key:"restart",value:function(){var e=this;this.initailizeCards(),(0,d.getRandomCard)(this.availableCards),(0,l.disablePlayAgainstButton)(),(0,l.disableGuardGuessButton)(),$("#priestList").empty();for(var a=0;a<this.players.length;a++)$("#playerPlayedList"+(a+1)).empty(),$("#playerTitle"+(a+1)).removeClass(),$("#playerTitle"+(a+1)).text("Player "+(a+1));this.players.forEach(function(a){a.reset(),a.draw(e.availableCards)}),this.currentPlayer=this.players[0],this.gameEnd=!1,this.startGame()}}]),e}();a.default=o},function(e,a,t){"use strict";var r,s,n=t(4),i=(r=n)&&r.__esModule?r:{default:r};function d(e){$("#playButton"+e).click(function(){s.playCardOnClick(e)})}function l(e){$("#playAgainstButton"+e).click(function(){s.playAgainstOnClick(e)})}function u(e){$("#guardGuessButton"+e).click(function(){s.guardGuessOnClick(e)})}$(document).ready(function(){s=new i.default,function(){for(var e=0;e<2;e++)d(e+1);for(var a=0;a<4;a++)l(a+1);for(var t=1;t<8;t++)u(t+1)}(),s.restart()}),$("#restart").click(function(){s.restart()})}]);
//# sourceMappingURL=main.bundle.js.map